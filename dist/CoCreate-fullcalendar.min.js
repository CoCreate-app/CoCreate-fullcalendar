!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CoCreate=e():(t.CoCreate=t.CoCreate||{},t.CoCreate.fullcalendar=e())}(this,(function(){return(()=>{var t={375:function(t,e,a){var n,i;"undefined"!=typeof self&&self,n=[a(446),a(965)],void 0===(i=function(t,e){return function(t,e,a){return{socket:null,setSocket:function(t){this.socket=t},readDocumentList:async function(t){if(!t)return!1;let a=e.getCommonParams();if(!t.collection)return!1;a={...a,...t},e.generateSocketClient(t.namespace,t.room);const n=this.socket.send("readDocumentList",a);try{return await this.socket.listenAsync(n)}catch(t){return null}},createDocument:async function(a){if(null===a)return!1;let n=e.getCommonParamsExtend(a),i={...a,...n},r=a.data||{};r.organization_id||(r.organization_id=t.config.organization_Id),a.data&&(r={...r,...a.data}),i.data=r;const o=e.generateSocketClient(a.namespace,a.room);let s=this.socket.send("createDocument",i,o);try{return await this.socket.listenAsync(s)}catch(t){return null}},updateDocument:async function(t){if(!t)return!1;if(t.document_id&&!a.checkDocumentId(t.document_id))return!1;let n=e.getCommonParamsExtend(t),i={...t,...n};if("object"==typeof t.data&&(i.set=t.data),Array.isArray(t.delete_fields)&&(i.unset=t.delete_fields),!i.set&&!i.unset)return!1;!1===t.broadcast&&(i.broadcast=!1),void 0===t.broadcast_sender&&(i.broadcast_sender=!0);const r=e.generateSocketClient(t.namespace,t.room);let o=this.socket.send("updateDocument",i,r);try{return await this.socket.listenAsync(o)}catch(t){return null}},readDocument:async function(t){if(null===t)return null;if(!t||!a.checkDocumentId(t.document_id))return null;let n=e.getCommonParamsExtend(t),i={...t,...n},r=this.socket.send("readDocument",i);try{return e.generateSocketClient(t.namespace,t.room),await this.socket.listenAsync(r)}catch(t){return null}},deleteDocument:async function(t){if(!t||!a.checkDocumentId(t.document_id))return null;let n=e.getCommonParamsExtend(t),i={...t,...n};const r=e.generateSocketClient(t.namespace,t.room);let o=this.socket.send("deleteDocument",i,r);try{return await this.socket.listenAsync(o)}catch(t){return null}},exportCollection:function(t){if(null===t)return;let a=e.getCommonParamsExtend(t);a.collection=t.collection,a.export_type=t.export_type,a.metadata=t.metadata,this.socket.send("exportDB",a)},importCollection:function(a){const{file:n}=a;if(null===a||!(n instanceof t.File))return;const i=n.name.split(".").pop();if(!["json","csv"].some((t=>t===i)))return;let r=e.getCommonParamsExtend(a);r.collection=a.collection,r.import_type=i,this.socket.send("importDB",r),this.socket.sendFile(n)},listen:function(t,e){this.socket.listen(t,e)},listenAsync:function(t){return this.socket.listenAsync(t)},createSocket:function(t,e){e?(this.socket.create({namespace:e,room:null,host:t}),this.socket.setGlobalScope(e)):this.socket.create({namespace:null,room:null,host:t})},read:async function(t,e){const{collection:n,document_id:i,name:r,namespace:o,room:s,is_read:l}=a.getAttr(t);if(!a.checkAttrValue(i))return!1!==e&&(e=!0),a.isJsonString(n)||a.isJsonString(i)?null:i&&n&&l?await this.readDocument({namespace:o,room:s,collection:n,document_id:i,name:r,is_flat:e}):null},save:async function(t){if(t)for(let e=0;e<t.length;e++)await this.saveElement(t[e])},saveElement:async function({element:e,value:n,is_flat:i}){if(!e||null===n)return;const{collection:r,document_id:o,name:s,namespace:l,room:c,broadcast:u,broadcast_sender:d,is_save:f}=a.getAttr(e);if(f&&r&&s)if(a.isCRDT(e)&&t.CoCreate.crdt)t.CoCreate.crdt.replaceText({collection:r,name:s,document_id:o,name:s,value:n});else{let t=await this.updateDocument({namespace:l,room:c,collection:r,document_id:o,upsert:!0,broadcast:u,broadcast_sender:d,is_flat:!1!==i,data:{[s]:n}});t.document_id&&o!==t.document_id&&await this.setDocumentId({element:e,docuement_id:t.document_id})}},setDocumentId:async function({element:t,form:e,document_id:a}){!e&&t&&(e=t.closest("form")),e?await CoCreate.form.setDocumentId(e):t&&t.setAttribute("data-document_id",a)},...a}}(window,t,e)}.apply(e,n))||(t.exports=i)},611:function(t,e,a){var n,i;"undefined"!=typeof self&&self,n=[a(585),a(375)],void 0===(i=function(t,e){return function(t,e,a){if(t){let t=window.CoCreateCrudSocket;t||(t=new e("ws"),window.CoCreateCrudSocket=t),a.setSocket(t),a.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return a}(!0,t,e)}.apply(e,n))||(t.exports=i)},965:function(t,e){var a;"undefined"!=typeof self&&self,void 0===(a=function(){return function(){function t(e,a){e=e||{};for(let n of Object.keys(a))a[n]instanceof Object&&Object.assign(a[n],t(e[n],a[n]));return Object.assign(e||{},a),e}function e(t,e){if(!e)return t;let a=e.split("."),n=t;for(var i=a.length-1;i>=0;i--)n={[a[i]]:n};return n}function a(t,e){try{let a=/([\w\W]+)\[(\d+)\]/gm.exec(t);if(a&&3==a.length){let n=a[1],i=parseInt(a[2]);e[n]&&Array.isArray(e[n])||(e[n]=[]),e[n][i]=e[t],delete e[t],t=n}}catch{}return t}function n(t,e){try{if(!t||!e)return null;if(e[t])return e[t];let n=t.split("."),i={...e};for(var a=0;a<n.length&&i;a++)i=i[n[a]];return i}catch{return null}}function i(t){return!!t&&t.constructor===Object}function r(t){return!!t&&t.constructor===Array}function o(n){let i=Object.keys(n),r={};return i.forEach((i=>{if((i=a(i,n)).split(".").length>1){let a=e(n[i],i);delete n[i],r=t(r,a)}else r[i]=n[i]})),r}function s(t){let e=Object.keys(t),a={};return e.forEach((e=>{let n=t[e];if(i(t[e])){let n=s(t[e]);Object.keys(n).forEach((t=>{let i=n[t];a[t=e+"."+t]=i}))}else r(n)?n.forEach(((t,n)=>{a[`${e}[${n}]`]=t})):a[e]=t[e]})),a}function l(t){if(!t)return;let e=t.getAttribute("data-collection"),a=t.getAttribute("data-document_id"),n=t.getAttribute("name"),i=t.getAttribute("data-room");return{collection:e,document_id:a,name:n,is_realtime:_(t),is_save:u(t),is_read:c(t),is_update:d(t),is_listen:m(t),broadcast:f(t),broadcast_sender:h(t),room:i}}const c=t=>p(t,"data-read_value"),u=t=>p(t,"data-save_value"),d=t=>p(t,"data-update_value"),f=t=>p(t,"data-broadcast"),h=t=>p(t,"data-broadcast_sender"),m=t=>p(t,"data-listen"),_=t=>p(t,"data-realtime");function p(t,e){return!!t&&"false"!==t.getAttribute(e)}function g(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)&&"null"!==t.toLowerCase()}function b(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function v(t){const{collection:e,document_id:a,name:n}=l(t);return!(b(e)||b(n)||!("INPUT"===t.tagName&&["text","email","tel","url"].includes(t.type)||"TEXTAREA"===t.tagName)||!n||!_(t)||"true"===t.getAttribute("data-unique")||"password"===t.type||!c(t))}function y(t){try{return!!t&&"null"!==t.toLowerCase()}catch(t){return!1}}function b(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}return{decodeObject:o,encodeObject:s,getAttr:l,isRealtimeAttr:_,isReadAttr:c,isSaveAttr:u,isUpdateAttr:d,isFlatAttr:t=>p(t,"data-flat"),checkAttrValue:g,isCRDT:v,checkDocumentId:y,getValueByPath:n,isJsonString:b}}()}.apply(e,[]))||(t.exports=a)},232:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>o});a(727);var n=a(611),i=a.n(n);const r={items:[],ioInstance:null,moduleAttribues:[],module_items:[],__init:function(){this.__initIntesection(),this.__initSocket(),this.__initEvents()},__initIntesection:function(){const t=this;this.ioInstance=new IntersectionObserver(((e,a)=>{e.forEach((e=>{if(e.isIntersecting){const a=t.__getMainAttribue(e.target);a.id&&document.dispatchEvent(new CustomEvent("CoCreateFilter-loadMore",{detail:{attrName:a.name,attrId:a.id}})),t.ioInstance.unobserve(e.target)}}))}),{threshold:1})},__runLoadMore:function(t,e){if(!e||!t)return;let a=this.items.find((a=>a.attrName===t&&a.id===e));a&&a.count>0&&this.fetchData(a)},__getMainAttribue:function(t){const e=this.moduleAttribues.find((e=>""!==(t.getAttribute(e)||"")));return e?{name:e,id:t.getAttribute(e)}:{}},__initSocket:function(){const t=this;i().listen("readDocumentList",(function(e){let a=e.element,n=t.items.find((t=>t.id===a));if(n){const a=e.data;let i=document.querySelector(`[${n.attrName}="${n.id}"][data-fetch_type="scroll"]`);a.length>0&&i&&t.ioInstance.observe(i);const r=e.operator.total,o=document.querySelectorAll(`[${n.attrName}="${n.id}"][data-fetch_type="total"]`);o&&o.forEach((t=>t.innerHTML=r))}}))},__initEvents:function(){const t=this;document.addEventListener("CoCreateFilter-loadMore",(function(e){const a=e.detail.attrId,n=e.detail.attrName;t.__runLoadMore(n,a)})),document.querySelectorAll('[data-fetch_type="loadmore"]').forEach((e=>{e.addEventListener("click",(function(a){a.preventDefault();const n=t.__getMainAttribue(e);n.id&&t.__runLoadMore(n.attrName,n.attrId)}))}))},setFilter:function(t,e,a){if(!e)return;let n=t.getAttribute(e);if(!n)return;this.moduleAttribues.includes(e)||this.moduleAttribues.push(e);let i=t.getAttribute("data-fetch_collection"),r="collection"==t.getAttribute("data-fetch_value_type"),o=t.getAttribute("data-order_by"),s=t.getAttribute("data-order_type")||"asc",l=parseInt(t.getAttribute("data-fetch_count")),c={el:t,id:n,eId:n,type:a,attrName:e,collection:i,startIndex:0,options:{},fetch:{},is_collection:r,search:{type:"or",value:[]},orders:[],filters:[]};return!isNaN(l)&&l>0&&(c.count=l),o&&c.orders.push({name:o,type:"asc"==s?1:-1}),this._initFilter(c,n,e),this._initOrder(c,n,e),this.items.push(c),this._initInputForm(c,e),this._initExportImport(c,n,e),c},_initFilter:function(t,e,a){let n=t.el.getRootNode().querySelectorAll("["+a+'="'+e+'"]');for(var i=0;i<n.length;i++){let r=n[i],o=r.getAttribute("data-filter_name"),s=r.getAttribute("data-filter_operator")?r.getAttribute("data-filter_operator"):"$contain",l=r.getAttribute("data-filter_value_type")?r.getAttribute("data-filter_value_type"):"string",c=r.getAttribute("data-filter_type"),u=r.getAttribute("data-filter_value");if(null!=u)if("raw"!==l&&(u=u.replace(/\s/g,"").split(",")),o){let e=this.getFilterByName(t,o,s);if("string"!=l)for(let t=0;t<u.length;t++)u[t]=Number(u[t]);this.insertArrayObject(t.filters,e,{name:o,value:u,operator:s,type:c})}else t.search.value=this._makeSearchOption(e,a)}},_initOrder:function(t,e,a){let n=t.el.getRootNode().querySelectorAll("["+a+'="'+e+'"]');const i=this;for(var r=0;r<n.length;r++){let e=n[r],a=e.getAttribute("data-order_by"),o=e.getAttribute("value");a&&o&&(["A","BUTTON"].includes(e.tagName)?e.addEventListener("click",(function(){let e=this.getAttribute("data-order_by"),a=this.getAttribute("value");i._applyOrder(t,e,a),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))})):this._applyOrder(t,a,o))}this._initToggleOrderEvent(t,e,a)},_initToggleOrderEvent:function(t,e,a){let n=document.querySelectorAll(`[${a}="${e}"][data-toggle_order]`);const i=this;n.forEach((e=>{e.addEventListener("click",(function(){let a=this.getAttribute("data-toggle_order")||"",r=this.getAttribute("data-order_by");a="asc"===a?"desc":"asc";for(let t=0;t<n.length;t++)n[t]!==e&&n[t].setAttribute("data-toggle_order","");t.orders=[],i._applyOrder(t,r,a),e.setAttribute("data-toggle_order",a),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))}))}))},_initExportImport:function(t,e,a){let n=document.querySelector(`[data-export_type][${a}="${e}"]`),r=document.querySelector(`[data-import="true"][${a}="${e}"]`);const o=this;n&&n.addEventListener("click",(function(){if(!t)return;let e=o.makeFetchOptions(t);e.export={collection:e.collection,type:n.getAttribute("data-export_type")||"json"},i().readDocumentList(e)})),r&&r.addEventListener("click",(function(){var e=document.createElement("input");if(e.type="file",!t)return;let a=t.collection;e.onchange=t=>{var e=t.target.files[0];i().importCollection({collection:a,file:e})},e.click()}))},_applyOrder:function(t,e,a){if(!a)return;let n=0,i=this.getOrderByName(t,e);n="asc"==a?1:"desc"==a?-1:[],this.insertArrayObject(t.orders,i,{name:e,type:n},n)},changeCollection:function(t){let e=t.el.getAttribute("data-fetch_collection");t.collection=e,t.startIndex=0},_makeSearchOption:function(t,e){let a=document.querySelectorAll("form["+e+"="+t+"]"),n="["+e+"="+t+"]",i=document.querySelectorAll("input"+n+",textarea"+n+", select"+n),r=[];for(let t=0;t<a.length;t++){let e=a[t].querySelectorAll("input, textarea, select");e=Array.prototype.slice.call(e),r=r.concat(e)}i=Array.prototype.slice.call(i),r=r.concat(i);let o=[];for(var s=0;s<r.length;s++){let t=r[s].getAttribute("data-filter_name"),e=r[s].getAttribute("data-order_by"),a=r[s],n=a.getAttribute("data-value_type")?a.getAttribute("data-value_type"):"string",i=null;t||e||("checkbox"!=a.type||a.checked?(i=a.value,"string"!=n&&(i=Number(i)),i&&!o.includes(i)&&o.push(i)):i=null)}return o},_initInputForm:function(t,e){if(!t)return;let a="["+e+'="'+t.id+'"]',n=t.el.getRootNode().querySelectorAll("form"+a+" input, form"+a+" textarea, form"+a+" select"),i=t.el.getRootNode().querySelectorAll("input"+a+",textarea"+a+", select"+a);this.setCheckboxName(t.id,e),n=Array.prototype.slice.call(n),i=Array.prototype.slice.call(i),n=n.concat(i);for(let e=0;e<n.length;e++){let a=n[e];a.getAttribute("data-order_by")?this._initOrderInput(t,a):this._initFilterInput(t,a,t.id)}},_initOrderInput:function(t,e){var a=this;e.addEventListener("change",(function(e){e.preventDefault();let n=this.getAttribute("data-order_by"),i=0,r=a.getOrderByName(t,n);i="asc"==this.value?1:"desc"==this.value?-1:[],a.insertArrayObject(t.orders,r,{name:n,type:i},i),t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"order"}}))}))},_initFilterInput:function(t,e,a){var n,i=this;e.addEventListener("input",(function(r){r.preventDefault();let o=this.getAttribute("data-filter_name"),s=this.getAttribute("data-filter_operator")||"$contain",l=this.getAttribute("data-filter_type"),c=this.getAttribute("data-filter_value_type")||"string";clearTimeout(n),n=setTimeout((function(){if(o){let a=i.getFilterByName(t,o,s),d=e.type,f=[];if("checkbox"==d)for(var n=document.querySelectorAll("input[name="+e.name+"]:checked"),r=0;r<n.length;r++)f.push(n[r].value);else if("raido"==d);else if("range"==d)f=[Number(e.min),Number(e.value)];else{var u=e.value;"string"!=c&&(u=Number(u)),"none"!=u&&(f=[u]),"raw"===c&&(f=u)}i.insertArrayObject(t.filters,a,{name:o,value:f,operator:s,type:l})}else t.search.value=i._makeSearchOption(a,t.attrName);t.el&&t.el.dispatchEvent(new CustomEvent("changeFilterInput",{detail:{type:"filter"}}))}),500)}))},setCheckboxName:function(t,e){for(var a=document.querySelectorAll("form["+e+'="'+t+'"]'),n=0;n<a.length;n++)for(var i=a[n].querySelectorAll("input[type=checkbox], form input[type=radio]"),r=0;r<i.length;r++){var o=i[r].getAttribute("name"),s=i[r].getAttribute("data-filter_name");!o&&s&&i[r].setAttribute("name","_"+t+"-"+s+"_"+n)}},getFilterByName:function(t,e,a){for(var n=0;n<t.filters.length;n++){var i=t.filters[n];if(i.name==e&&i.operator==a)return n}return-1},insertArrayObject:function(t,e,a,n){return n||(n=a.value),"object"==typeof n&&0==n.length?-1!=e&&t.splice(e,1):-1!=e?t[e]=a:t.push(a),t},getOrderByName:function(t,e){for(var a=0;a<t.orders.length;a++)if(t.orders[a].name==e)return a;return-1},defineEvent:function(t){t.el.addEventListener("fetchFilterData",(function(t){}))},fetchData:function(t){let e=this.makeFetchOptions(t);i().readDocumentList(e)},getObjectByFilterId:function(t,e){for(var a=0;a<t.length;a++){let n=t[a].filter;if(n&&n.id==e)return t[a]}},getObjectByElement:function(t,e){for(var a=0;a<t.length;a++){let n=t[a].filter;if(n&&n.el.isSameNode(e))return t[a]}},makeFetchOptions:function(t){let e={collection:t.collection,element:t.eId,metadata:{isRefresh:t.isRefresh},operator:{filters:t.filters,orders:t.orders,search:t.search,startIndex:t.startIndex},is_collection:t.is_collection};return t.count&&(e.operator.count=t.count),e},init:function({name:t,attribute:e,callback:a}){let n=document.querySelectorAll(`[data-fetch_collection][${e}]`);const r=this;n.forEach((a=>{r.__initFilterElement(a,e,t)})),i().listen("readDocumentList",(function(t){a.call(null,t)}))},__initFilterElement:function(t,e,a){let n=t.getAttribute(e);const i=this;if(!n)return;let r=this.setFilter(t,e,a);r&&(this.module_items.push({el:t,filter:r,id:n,name:a}),t.addEventListener("changeFilterInput",(function(t){i.fetchData(r)})),this.fetchData(r))}};r.__init();const o=r},597:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>u});var n=a(366);const i={attribute:"data-actions",actions:{},selectedStage:[],stageIndex:0,selectedElement:null,completedEventName:"completedEvent",__init:function(){this.actionButtonEvent()},actionButtonEvent:function(){const t=this;document.addEventListener("click",(function(e){let a=e.target;if(a.getAttribute("data-actions")||(a=e.target.closest("[data-actions]")),!a)return;e.preventDefault();let n=(a.getAttribute(t.attribute)||"").replace(/\s/g,"").split(",");0!=n.length&&(t.stageIndex=0,t.selectedStage=n,t.selectedElement=a,t.__runActionFunc())}))},init:function({action:t,callback:e,endEvent:a}){this.registerEvent(t,e,null,a)},registerEvent:function(t,e,a,n){if(this.actions[t])return;this.actions[t]={key:t,runFunc:e,instance:a||window,endEvent:n};for(let e in this.actions)if(e!=t&&this.actions[e].endEvent===n)return;const i=this;document.addEventListener(n,(function(t){i.__nextAction(n,t.detail)}))},__runActionFunc:function(t){if(this.stageIndex>=this.selectedStage.length)return void(this.stageIndex==this.selectedStage.length&&this.__runAtag(this.selectedElement));const e=this.selectedStage[this.stageIndex],a=this.actions[e];if(a)a.runFunc?a.runFunc.call(null,this.selectedElement,t):this.__nextAction(a.endEvent,{});else{"next"===this.__runSpecialAction(e,t)&&this.__moveNextAction()}},__nextAction:function(t,e){const a=this.selectedStage[this.stageIndex];a&&t===this.actions[a].endEvent&&this.__moveNextAction(e)},__runAtag:function(t){t.querySelector("a")},__runSpecialAction:function(t,e){let a=/(\w+)\{([a-zA-Z0-9_ \-#$.]+)\}/gm.exec(t);if(!a||a.length<3)return"next";let n=a[1],i=a[2].trim();if(!i)return"next";const r=this;switch(n){case"event":document.addEventListener(i,(t=>{r.__moveNextAction(t)}),{once:!0});break;case"timeout":parseInt(i)>0&&setTimeout((function(){r.__moveNextAction(e)}),parseInt(i));break;case"action":let t=document.querySelector(i);t&&t.click();break;default:return"next"}},__moveNextAction:function(t){this.stageIndex++,this.__runActionFunc(t)}};i.__init();const r=i;a(727);var o=a(611),s=a.n(o);const l={mainInfo:{},init:function(){const t=this;s().listen("updateDocument",(function(e){t.render(e)})),s().listen("readDocument",(function(e){t.render(e)})),s().listen("connect",(function(e){t.__getRequest()}))},initElement:function(t){const e=this.__getRequest(t);e&&e.forEach((t=>{s().readDocument({collection:t.collection,document_id:t.document_id})}))},render:function(t){const e=t.collection,a=t.document_id;for(let n in t.data){const i=this.__makeKey(e,a,n),r=t.data[n];this.mainInfo[i]&&this.mainInfo[i].forEach((t=>{t.el.setAttribute(t.attr,r),t.el.dispatchEvent(new CustomEvent("CoCreateAttribute-run",{eventType:"rendered",item:t.el}))}))}},setValue:function(t,e){},__getRequest:function(t){let e=t||document,a=e.querySelectorAll("[fetch-for]"),n=this,i=[];return 0===a.length&&e!=document&&e.hasAttributes("fetch-for")&&(a=[e]),a.forEach((t=>{const e=t.getAttribute("data-collection"),a=t.getAttribute("data-document_id"),r=t.getAttribute("name"),o=t.getAttribute("value"),s=t.attributes;for(let l=0;l<s.length;l++){let c=n.__jsonParse(s[l].value);if(c){let u=c.collection||e,d=c.document_id||a,f=c.name||r,h=c.value||o;if(c["data-pass_id"]){let t=n.__checkPassId(c["data-pass_id"]);t?(u=t.collection,d=t.document_id,h=t.value):(u=null,d=null,h=null)}const m=n.__makeKey(u,d,f);u&&d&&f&&(n.mainInfo[m]||(n.mainInfo[m]=[]),n.mainInfo[m].push({el:t,attr:s[l].name}),i.some((t=>t.collection===u&&t.document_id===d))||i.push({collection:u,document_id:d}))}}})),i},__jsonParse:function(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e?e:null}catch(t){return null}},__checkPassId:function(t){var e=localStorage.getItem("dataParams");if(!(e=JSON.parse(e))||0==e.length)return null;for(var a=0;a<e.length;a++)if(e[a].pass_to==t)return{collection:e[a].collection,document_id:e[a].document_id,value:e[a].value};return null},__makeKey:function(t,e,a){return`${t}_${e}_${a}`}};l.init(),n.default.init({name:"CoCreateLogicAttributes",observe:["addedNodes"],attributesFilter:["data-for"],callback:function(t){l.initElement(t.target)}});const c={attributes:l,init:function(){this.__initKeys(),this.__initPassSessionIds(),this.__initPassParams(),this.__initPassValueParams(),this.__initGetValueInput(),this.initAtagElement()},__initKeys:function(){window.localStorage.getItem("apiKey")&&(config.apiKey=window.localStorage.getItem("apiKey")),window.localStorage.getItem("securityKey")&&(config.securityKey=window.localStorage.getItem("securityKey")),window.localStorage.getItem("organization_id")&&(config.organization_Id=window.localStorage.getItem("organization_id"))},__initPassSessionIds:function(){let t=window.localStorage.getItem("organization_id"),e=window.localStorage.getItem("user_id"),a=window.localStorage.getItem("adminUI_id"),n=window.localStorage.getItem("builderUI_id");this.__initPassItems(t,".sessionOrg_Id",!0),this.__initPassItems(e,".sessionUser_Id"),this.__initPassItems(a,".sessionAdminUI_Id"),this.__initPassItems(n,".sessionBuilderUI_Id")},__initPassItems:function(t,e,a){const n=this;if(t){document.querySelectorAll(e).forEach((e=>{n.__setAttributeValueOfElement(e,"data-document_id",t),n.__setAttributeValueOfElement(e,"data-filter_value",t)}))}},initElement:function(t){const e=this;let a=t||document;if(!a.querySelectorAll)return;let i=a.querySelectorAll("[data-pass_id]");i=Array.from(i),a!=document&&a.hasAttribute("data-pass_id")&&i.push(a);let r=window.localStorage.getItem("dataParams");r=JSON.parse(r),r&&0!=r.length&&i.forEach((t=>{if(n.default.getInitialized(t))return;const a=t.getAttribute("data-pass_id"),i=r.find((t=>t.pass_to==a));if(!i)return;const{collection:o,document_id:s,pass_to:l,prefix:c}=i;n.default.setInitialized(t),"FORM"===t.tagName&&!t.getAttribute("data-colleciton")&&o&&t.setAttribute("data-colleciton",o),e.__setPassAttributes(t,i)}))},initAtagElement:function(){const t=this;document.addEventListener("click",(function(e){const a=e.target.closest("a, button");if(!a)return;if("modal"===a.getAttribute("target")&&a.getAttribute("data-pass_to"))return e.preventDefault(),void t.setLinkProcess(a);const n=a.getAttribute("href");if("modal"!==a.getAttribute("target")){if(a.hasAttribute("data-actions"))return;const i=a.getAttribute("data-pass_to");n?(e.preventDefault(),t.storePassData(a),t.openAnother(a)):(t.storePassData(a),i&&t.__initPassParams(i))}}))},__initPassParams:function(t){var e=window.localStorage.getItem("dataParams");if(!(e=JSON.parse(e))||0==e.length)return;let a=this;e.forEach((function(e){var n=e.collection,i=(e.document_id,e.prefix,e.pass_to);t&&i!=t||(document.querySelectorAll("form").forEach((t=>{var e=t.getAttribute("data-pass_id");e&&e==i&&n&&""!=n&&(t.getAttribute("data-collection")||t.setAttribute("data-collection",n))})),document.querySelectorAll("[data-pass_id]").forEach((t=>{var n=t.getAttribute("data-pass_id");n&&n==i&&a.__setPassAttributes(t,e)})))}))},__initPassValueParams:function(t){var e=window.localStorage.getItem("valueParams");(e=JSON.parse(e))&&0!=e.length&&e.forEach((function(e){var a=e.pass_value_to;(t||document).querySelectorAll("[data-pass_value_id]").forEach((t=>{let n=t.getAttribute("data-pass_value_id");n&&n==a&&(["INPUT","TEXTAREA","SELECT"].includes(t.tagName)?(t.value=e.value,CoCreate.floatingLabel&&CoCreate.floatingLabel.update(t)):t.innerHTML=e.value)}))}))},__getPassAttributes:function(t){return{collection:t.getAttribute("data-pass_collection")||t.getAttribute("data-pass_fetch_collection"),document_id:t.getAttribute("data-pass_document_id"),name:t.getAttribute("data-pass_name"),value:t.getAttribute("data-pass_value"),pass_to:t.getAttribute("data-pass_to"),filter_name:t.getAttribute("data-pass_filter_name"),filter_value:t.getAttribute("data-pass_filter_value"),prefix:t.getAttribute("data-pass_prefix")||""}},__setPassAttributes:function(t,e){const{collection:a,document_id:n,name:i,value:r,pass_to:o,filter_name:s,filter_value:l,prefix:c}=e,u=t.getAttribute("data-pass_id"),d=!!t.hasAttribute("data-pass_refresh");u==o&&(a&&(this.__setAttributeValueOfElement(t,"data-collection",a,d),this.__setAttributeValueOfElement(t,"data-fetch_collection",a,d),this.__setAttributeValueOfElement(t,"data-pass_fetch_collection",a,d),this.__setAttributeValueOfElement(t,"data-pass_collection",a,d)),n&&(this.__setAttributeValueOfElement(t,"data-document_id",n,d),this.__setAttributeValueOfElement(t,"data-fetch_document_id",n,d),this.__setAttributeValueOfElement(t,"data-pass_fetch_document_id",n,d),this.__setAttributeValueOfElement(t,"data-pass_document_id",n,d)),i&&(this.__setAttributeValueOfElement(t,"name",i,d),this.__setAttributeValueOfElement(t,"data-fetch_name",i,d),this.__setAttributeValueOfElement(t,"data-pass_name",i,d)),r&&(this.__setAttributeValueOfElement(t,"value",r,d),this.__setAttributeValueOfElement(t,"data-pass_value",r,d)),c&&(this.__setAttributeValueOfElement(t,"name",c+t.getAttribute("name"),d,!0),this.__setAttributeValueOfElement(t,"data-fetch_name",c+t.getAttribute("data-fetch_name"),d,!0),this.__setAttributeValueOfElement(t,"data-pass_prefix",c,d)),s&&(this.__setAttributeValueOfElement(t,"data-filter_name",s,d),this.__setAttributeValueOfElement(t,"data-pass_filter_name",s,d)),l&&(this.__setAttributeValueOfElement(t,"data-filter_value",l,d),this.__setAttributeValueOfElement(t,"data-pass_filter_value",l,d)))},__setAttributeValueOfElement:function(t,e,a,n,i){if(a){if(t.hasAttribute(e)&&i)return void t.setAttribute(e,a);if(t.hasAttribute(e)&&(!t.getAttribute(e)||n))return void t.setAttribute(e,a)}},storePassData:function(t){let e=[];const a=this;let n=this.__getPassAttributes(t);t.hasAttribute("data-actions")||(n.pass_to&&e.push(n),t.querySelectorAll("[data-pass_to]").forEach((t=>{let n=a.__getPassAttributes(t);n.pass_to&&e.push(n)})),e.length>0&&localStorage.setItem("dataParams",JSON.stringify(e)))},__initGetValueInput:function(){var t=document.querySelectorAll("input, textarea");let e=this;for(var a=0;a<t.length;a++){var n=t[a];n.id&&(n.addEventListener("input",(function(t){e.__setGetValueProcess(this.id,this.value)})),n.addEventListener("updated_by_fetch",(function(t){e.__setGetValueProcess(this.id,this.value)})))}},passProcessAction:function(t){let e=t.closest("form");if(!e)return;let a=e.querySelectorAll("input, textarea, select"),n=[];a.forEach((t=>{const e=t.getAttribute("data-pass_value_to"),a=t.value;e&&n.push({pass_value_to:e,value:a})})),n.length>0&&window.localStorage.setItem("valueParams",JSON.stringify(n)),this.__initPassValueParams(),document.dispatchEvent(new CustomEvent("passValueActionEnd",{detail:{}}))},setDataPassValues:function(t){const e=[];for(let a in t)e.push({pass_value_to:a,value:t[a]});e.length>0&&window.localStorage.setItem("valueParams",JSON.stringify(e))},initDataPassValues:function(){window.localStorage.removeItem("valueParams")},openAnother:function(t){var e=t.getAttribute("href"),a=t.getAttribute("target");"_blank"==a?window.open(e,"_blank"):"_window"==a?window.open(e,"_blank","location=yes,height=570,width=520,scrollbars=yes,status=yes"):window.open(e,"_self")},setLinkProcess:function(t){if(t.hasAttribute("data-actions"))return;const e=t.getAttribute("data-pass_to"),a=t.getAttribute("href");this.storePassData(t),this.checkOpenCocreateModal(t)?void 0!==CoCreate.modal&&CoCreate.modal.open(t):a?this.openAnother(t):e&&this.__initPassParams(e)},checkOpenCocreateModal:function(t){return"modal"===t.getAttribute("target")},__setGetValueProcess:function(t,e){t&&document.querySelectorAll('[data-get_value="'+t+'"]').forEach((t=>{if(void 0!==t.value?t.value=e:void 0!==t.textContent&&(t.textContent=e),CoCreate.floatingLabel&&CoCreate.floatingLabel.update(t),t.dispatchEvent(new Event("input",{bubbles:!0})),t.classList.contains("searchInput")){let e=new KeyboardEvent("keydown",{keyCode:13});t.dispatchEvent(e)}}))}};c.init(),n.default.init({name:"CoCreateAttributes",observe:["addedNodes"],attributesFilter:["data-for"],callback:function(t){let e=t.target;c.attributes.initElement(e)}}),n.default.init({name:"CoCreateLogic",observe:["addedNodes"],attributesFilter:["data-pass_id"],callback:function(t){c.initElement(t.target)}}),r.init({action:"passValueAction",endEvent:"passValueActionEnd",callback:(t,e)=>{c.passProcessAction(t)}});const u=c},366:(t,e,a)=>{"use strict";function n(t){this.callbackMap=new Map,this.callbackMap.set("ALL",{attributes:[],addedNodes:[],removedNodes:[],characterData:[],childList:[]});let[e,a]=this.runCallbackGen("attributes");this.runCallbackAtt=e,this.runCallbackAttAll=a,[e,a]=this.runCallbackGen("characterData"),this.runCallbackChar=e,this.runCallbackCharAll=a,this.runCallbackAdd=this.runCallbackExGen("addedNodes","addedNodes"),this.runCallbackRemove=this.runCallbackExGen("removedNodes","removedNodes");new MutationObserver((t=>this._callback.call(this,t))).observe(t,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0})}a.r(e),a.d(e,{default:()=>r}),window.counter=0;const i=["addedNodes","removedNodes","attributes","characterData","childList"];n.prototype.init=function({observe:t=["addedNodes","attributes"],attributeFilter:e,callback:a}){if(!t||!t.every((t=>i.includes(t))))throw"please enter a valid observe";if(this.observe=t,this.callback=a,e&&e.length)for(let t of e)this._register(t.toLowerCase());else this._register("ALL")},n.prototype._register=function(t){for(let e of this.observe)"childList"!==e?this.callbackMap.has(t)?this.callbackMap.get(t)[e]?this.callbackMap.get(t)[e].push(this.callback):this.callbackMap.get(t)[e]=[this.callback]:this.callbackMap.set(t,{[e]:[this.callback]}):this.callbackMap.get("ALL").childList&&this.callbackMap.get("ALL").childList.push(this.callback)},n.prototype.uninit=function(t){for(let[e,a]of this.callbackMap.entries())a.attributes&&(a.attributes=a.attributes.filter((e=>e!==t))),a.characterData&&(a.characterData=a.characterData.filter((e=>e!==t))),a.addedNodes&&(a.addedNodes=a.addedNodes.filter((e=>e!==t))),a.removedNodes&&(a.removedNodes=a.removedNodes.filter((e=>e!==t))),a.childList&&(a.childList=a.childList.filter((e=>e!==t))),this.callbackMap.set(e,{attributes:a.attributes,characterData:a.characterData,addedNodes:a.addedNodes,removedNodes:a.removedNodes,childList:a.childList})},n.prototype._callback=function(t){for(let e of t)switch(window.counter++,e.type){case"attributes":this._attributeCallback(e);break;case"characterData":this._characterDataCallback(e);break;case"childList":this._childListCallback(e)}},n.prototype.runCallbackGen=function(t){return[function(e,a){let n=this.callbackMap.get(a);if(n&&n[t])for(let a of n[t])a(e)},function(e){for(let a of this.callbackMap.get("ALL")[t])a(e)}]},n.prototype._attributeCallback=function(t){if(!t.target.hasAttributes(t.attributeName))return;t.target.getAttribute(t.attributeName)!==t.oldValue&&(this.runCallbackAtt(t,t.attributeName),this.runCallbackAttAll(t))},n.prototype._characterDataCallback=function(t){if(t.target.data===t.oldValue)return;this.runCallbackCharAll(t);let e=t.target.parentElement;for(let a of e.attributes)this.runCallbackChar(t,a.name)},n.prototype.runCallbackExGen=function(t,e){return function a(n){for(let i of n[e]){if(i.tagName)for(let e of i.attributes){let a=this.callbackMap.get(e.name);if(a&&a[t])for(let e of a[t])e({type:n.type,target:i,[t]:!0})}i.children&&a.call(this,{[e]:i.children})}for(let a of this.callbackMap.get("ALL")[t])for(let i of n[e])i.tagName&&a({type:n.type,target:i,[t]:!0})}},n.prototype._childList=function(t){this.callbackMap.get("ALL").childList.forEach((e=>{e(t)}))},n.prototype._childListCallback=function(t){this._childList(t),this.runCallbackAdd(t),this.runCallbackRemove(t)},n.prototype.setInitialized=function(t,e){t["co_initialized_"+(e=e||"")]=!0},n.prototype.getInitialized=function(t,e){return!!t["co_initialized_"+(e=e||"")]};const r=new n(document.body)},446:function(t,e){var a;"undefined"!=typeof self&&self,void 0===(a=function(){return function(t){function e(){let e={};return t&&t.config&&(e=t.config),{apiKey:e.apiKey,organization_id:e.organization_Id}}function a(e){let a={};return t&&t.config&&(a=t.config),{apiKey:e.apiKey||a.apiKey,organization_id:e.organization_id||a.organization_Id}}function n(e,a){let n={};t&&t.config&&(n=t.config);let i=e||n.organization_Id,r=a||"";return r?`${i}/${r}`:i}return{getCommonParams:e,getCommonParamsExtend:a,generateSocketClient:n}}(window)}.apply(e,[]))||(t.exports=a)},585:function(t,e,a){var n,i;"undefined"!=typeof self&&self,n=[a(446),a(212)],void 0===(i=function(t,e){return function(t,e,a,n,i){class r{constructor(t="crud"){this.prefix=t||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(t){this.globalScope=`${this.prefix}/${t}`}getGlobalScope(){return this.globalScope}create(t){const{namespace:i,room:r}=t,o=this.getKey(i,r);let s,l=this;if(i&&this.setGlobalScope(i),this.sockets.get(o))return void(s=this.sockets.get(o));let c=e.location.protocol;"about:"===e.location.protocol&&(c=e.parent.location.protocol,t.host||(t.host=e.parent.location.host));let u="http:"===c?"ws":"wss";const d=t.port?t.port:8088;let f=`${u}://${e.location.host}:${d}/${o}`;t.host&&(f=t.host.includes("://")?`${t.host}/${o}`:t.host.includes(":")?`${u}://${t.host}/${o}`:`${u}://${t.host}:${d}/${o}`);try{let t=null;e.localStorage&&(t=e.localStorage.getItem("token")),s=new a(f,t),s.cocreate_connected=!1,this.sockets.set(o,s)}catch(t){return}s.onopen=function(t){s.cocreate_connected||(s.cocreate_connected=!0),(l.messageQueue.get(o)||[]).forEach((t=>s.send(JSON.stringify(t)))),l.messageQueue.set(o,[])},s.onclose=function(e){switch(e.code){case 1e3:break;default:l.destroy(s,o),l.reconnect(s,t)}},s.onerror=function(e){l.destroy(s,o),l.reconnect(s,t)},s.onmessage=function(t){try{if(e.Blob&&t.data instanceof n)return void l.saveFile(t.data);let a=JSON.parse(t.data);if(a.data&&(a.data.uid&&l.__fireEvent(a.data.uid,a.data),a.data.event))return void l.__fireEvent(a.data.event,a.data);a.action;const i=l.listeners.get(a.action);if(!i)return;i.forEach((t=>{t(a.data,o)}))}catch(t){}}}__fireEvent(t,a){if(e.CustomEvent){var n=new e.CustomEvent(t,{detail:a});e.document.dispatchEvent(n)}else process.emit(t,a)}send(t,e,a){const n=i.generate(),r={action:t,data:{...e,uid:n}},o=this.getKeyByRoom(a),s=this.getByRoom(a);return s&&s.cocreate_connected?s.send(JSON.stringify(r)):this.messageQueue.get(o)?this.messageQueue.get(o).push(r):this.messageQueue.set(o,[r]),n}sendFile(t,e){const a=this.getByRoom(e);a&&a.send(t)}listen(t,e){this.listeners.get(t)?this.listeners.get(t).push(e):this.listeners.set(t,[e])}reconnect(t,e){let a=this;setTimeout((function(){a.create(e)}),1e3)}destroy(t,e){t&&(t.onerror=t.onopen=t.onclose=null,t.close(),t=null),this.sockets.get(e)&&this.sockets.delete(e)}destroyByKey(t){let e=this.sockets.get(t);e&&this.destroy(e,t)}getKey(t,e){let a=`${this.prefix}`;return t&&""!=t&&(a+=e&&""!=e?`/${t}/${e}`:`/${t}`),a}getByRoom(t){let e=this.getKeyByRoom(t);return this.sockets.get(e)}getKeyByRoom(t){let e=this.globalScope;return t&&(e=`${this.prefix}/${t}`),e}saveFile(t){if(e.document){const n=this.saveFileName||"downloadFile";var a=e.document.createElement("a");e.document.body.appendChild(a),a.style="display: none";let i=window.URL.createObjectURL(t);a.href=i,a.download=n,a.click(),e.URL.revokeObjectURL(i),this.saveFileName=""}}listenAsync(t){return new Promise(((a,n)=>{let i=setTimeout((()=>{clearTimeout(i),a(null)}),5e3);e.document?e.document.addEventListener(t,(function(t){a(t.detail)}),{once:!0}):process.once(t,(t=>{a(t)}))}))}}return r}(0,window,WebSocket,Blob,e)}.apply(e,n))||(t.exports=i)},727:(t,e,a)=>{"use strict"},212:function(t,e){var a;"undefined"!=typeof self&&self,void 0===(a=function(){return function(t){const e={attribute:"data-uuid",init:function(e){if(!t.document)return;const a=e||t.document;if(!a.querySelectorAll)return;let n=a.querySelectorAll(`[${this.attribute}]`);const i=this;n.forEach((t=>{const e=parseInt(t.getAttribute(i.attribute))||36,a=i.generate(e);"INPUT"===t.tagName||"TEXTAREA"===t.tagName?t.value=a:t.innerHTML=a}))},generate:function(e=36){let a=(new Date).getTime(),n=t.performance&&t.performance.now&&1e3*t.performance.now()||0,i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=i.length)i=i.substr(0,e);else{let t=e-i.length,a="-xxxyyxxx",n=Math.floor(t/a.length);for(let t=0;t<n;t++)i+=a;n=t-n*a.length,i+=a.substr(0,n)}return i.replace(/[xy]/g,(function(t){var e=16*Math.random();return a>0?(e=(a+e)%16|0,a=Math.floor(a/16)):(e=(n+e)%16|0,n=Math.floor(n/16)),("x"==t?e:7&e|8).toString(16)}))}};return e.init(),e}(window)}.apply(e,[]))||(t.exports=a)}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,a),r.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";var t=r(a(611)),e=r(a(232)),n=r(a(366)),i=r(a(597));function r(t){return t&&t.__esModule?t:{default:t}}var o=[],s="cal-container";const l=["#09efc6","#09ef1a","#efec09","#ef8609","#ef6009","#b609ef","#ef0986","#09efec","#ecef09","#09a6ef","#076692","#c0b507","#c04807","#6b07c0","#72aeb5","#69811e","#8d2b23"],c=["#8c489f","#f610e5","#1013f6","#1079f6","#109ff6","#49f610","#10f679","#f61013","#1310f6","#f65910","#f8996c","#3f4af8","#3fb7f8","#94f83f","#8d514a","#fff","#72d4dc"];function u(t){let a=t||document;if(!a.querySelectorAll)return;let i=a.querySelectorAll(".cal-container");0==i.length&&a!=document&&a.hasAttribute(s)&&(i=[a]);for(var r=0;r<i.length;r++){var l=i[r],c=l.id;if(!c)continue;var u=l.getAttribute("data-calendar_id"),d=l.getAttribute("data-dispaly_field");let t=e.default.setFilter(l,"data-calendar_id","calendar");if(t&&!n.default.getInitialized(l)){n.default.setInitialized(l);var f=new FullCalendar.Calendar(l,{plugins:["interaction","dayGrid","timeGrid","resourceTimeline","timeline","list"],height:"100%",editable:!0,timeZone:"local",eventResizableFromStart:!0,eventLimit:!0,selectable:!0,selectMirror:!0,nowIndicator:!0,selectMinDistance:100,header:{left:"prev,",center:"title",right:"next"},defaultView:"dayGridMonth",eventClick:function(t){_(t)},eventResize:function(t){p(t)},eventDrop:function(t){p(t)},select:function(t){y(t)}});f.render();var h={eId:c,calendar_id:u,calendar:f,displayName:d,filter:t};l.addEventListener("changeFilterInput",(function(t){h.filter.startIndex=0,CoCreate.filter.fetchData(h.filter)})),CoCreate.filter.fetchData(t),o.push(h)}}}function d(){var t=Math.floor(Math.random()*l.length);return{bg_color:l[t],text_color:c[t]}}function f(t,e){var a="";return t[e]&&e&&(a=t[e]),a}function h(t,e){var a=new Object;const{bg_color:n,text_color:i}=d();return a.id=t._id,a.title=f(t,e),a.textColor="black",a.backgroundColor=n,a.textColor=i,a.start=t.start_date,a.end=k(t.end_date,t.end_time,t.allDay),a.allDay=t.allDay,t.start_time&&(a.start+="T"+t.start_time),t.end_time&&(a.end+="T"+t.end_time),t.start_date&&t.end_date?a:null}function m(t,e){t.getEventById(e).remove()}function _(t){var e=t.event,a=e.id,n=e._calendar.el.querySelector(".eventLink");n.querySelectorAll("[data-pass_document_id]").forEach((t=>{t.getAttribute("data-pass_document_id")||t.setAttribute("data-pass_document_id",a)})),i.default.initDataPassValues(),i.default.setLinkProcess(n)}function p(e){var a=e.event,n=g(a.start),i=g(a.end),r=b(a.start),o=b(a.end),s=a._calendar.el.id,l=v(s);l&&t.default.updateDocument({collection:l.filter.collection,element:s,metadata:"",document_id:a.id,data:{start_date:n,end_date:i,start_time:r,end_time:o}})}function g(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),e+"-"+a+"-"+n}function b(t){var e=t.getHours(),a=t.getMinutes();return e<10&&(e="0"+e),a<10&&(a="0"+a),e+":"+a}function v(t){for(var e=0;e<o.length;e++){var a=o[e];if(t==a.eId)return a}return null}function y(t){var e=g(t.start),a=g(t.end),n=b(t.start),r=b(t.end);if(v(t.view.calendar.el.id)){const o=t.view.calendar.el.querySelector(".eventLink");o.querySelectorAll("[data-pass_document_id]").forEach((t=>{t.getAttribute("data-pass_document_id")||t.setAttribute("data-pass_document_id","")})),i.default.setDataPassValues({start_date:e,end_date:a,start_time:n,end_time:r}),i.default.setLinkProcess(o)}}function A(t){let e=t||document;if(e.querySelectorAll){var a=e.querySelectorAll("[data-calendar_id][data-btn_type]");0===a.length&&e!=document&&e.hasAttribute("data-btn_type")&&e.hasAttribute("data-calendar_id")&&(a=[e]);for(var i=0;i<a.length;i++){var r=a[i];n.default.getInitialized(r)||(n.default.setInitialized(r),r.addEventListener("click",(function(t){t.preventDefault();var e=this.getAttribute("data-btn_type");E(this.getAttribute("data-calendar_id"),e)})))}}}function k(t,e,a){return t}function E(t,e){if(t)for(var a=0;a<o.length;a++){var n=o[a];if(n.eId==t){var i=n.calendar;switch(e){case"dayGridDay":i.changeView("dayGridDay");break;case"dayGridWeek":i.changeView("dayGridWeek");break;case"dayGridMonth":i.changeView("dayGridMonth");break;case"resourceTimelineDay":i.changeView("resourceTimelineDay");break;case"resourceTimelineThreeDays":i.changeView("resourceTimelineThreeDays");break;case"resourceTimelineFiveDays":i.changeView("resourceTimelineFiveDays");break;case"timeGridWeek":i.changeView("timeGridWeek");break;case"timeGridDay":i.changeView("timeGridDay");break;case"listDay":i.changeView("listDay");break;case"listWeek":i.changeView("listWeek");break;case"listMonth":i.changeView("listMonth");break;case"listYear":i.changeView("listYear");break;case"timelineWeek":i.changeView("timelineWeek");break;case"today":i.today()}}}}t.default.listen("updateDocument",(function(t){!function(t){for(var e=t.collection,a=0;a<o.length;a++){var n=o[a];if(n.filter.collection==e){var i=n.calendar,r=[],s=i.getEventById(t.document_id);if(s){var l=s.start,c=s.end,u=g(l),d=b(l),f=g(c),m=b(c),_=s.allDay;s.backgroundColor,s.textColor;const e=t.data;for(var p in e){if(p==n.displayName){var v=e[p];s.setProp("title",v)}"start_date"==p&&(u=e[p]),"end_date"==p&&(f=e[p]),"start_time"==p&&(d=e[p]),"end_time"==p&&(m=e[p]),"allDay"===p&&(_=e[p])}f=k(f),s.setAllDay(_),s.setStart(u+"T"+d),s.setEnd(f+"T"+m)}else{let e=h(t.data,n.displayName);e&&(r.push(e),i.addEventSource(r))}}}}(t)})),t.default.listen("deleteDocument",(function(t){!function(t){const e=t.document_id;for(var a=0;a<o.length;a++){var n=o[a];n.filter.collection==t.collection&&m(n.calendar,e)}}(t)})),t.default.listen("readDocumentList",(function(t){!function(t){let a=e.default.getObjectByFilterId(o,t.element);a&&function(t,e){var a=new Array;e.data.forEach((function(e,n){var i={};const{bg_color:r,text_color:o}=d();i.id=e._id,i.title=f(e,t.displayName),i.textColor=o,i.backgroundColor=r,i.start=e.start_date,i.end=k(e.end_date,e.end_time,e.allDay),i.allDay=e.allDay,e.start_time&&(i.start+="T"+e.start_time),e.end_time&&(i.end+="T"+e.end_time),e.start_date&&e.end_date&&a.push(i)})),t.calendar.addEventSource(a)}(a,t)}(t)})),u(),A(),n.default.register("CoCreateCalendar",window,u),n.default.register("CoCreateCalendar_btn",window,A)})(),n=n.default})()}));